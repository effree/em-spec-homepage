<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EM-Spec - Real-Time Audio Spectrogram</title>
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon" sizes="64x64">
    <!-- Boxicons -->
    <link href='https://cdn.boxicons.com/3.0.3/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <link href='https://cdn.boxicons.com/3.0.3/fonts/brands/boxicons-brands.min.css' rel='stylesheet'>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=SF+Mono&display=swap"
        rel="stylesheet">

    <style>
        /* Reset & Core Variables derived from reference/settings.css */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Palette */
            --background: #1a1c23;
            --surface: #23262f;
            --surface-hover: #2d313c;
            --border: #121318;

            --text-primary: #d0d2d6;
            --text-secondary: #8b92a0;
            --text-muted: #5c6270;

            /* Accents */
            --accent-pink: #d946ef;
            --accent-blue: #3b82f6;
            --accent-orange: #f97316;
            --accent-purple: #a855f7;
            --danger: #ef4444;

            /* Effects */
            --text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            --panel-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            --glow-pink: 0 0 15px rgba(217, 70, 239, 0.15);
            --glow-blue: 0 0 15px rgba(59, 130, 246, 0.15);
            --glow-orange: 0 0 15px rgba(249, 115, 22, 0.15);
            --glow-purple: 0 0 15px rgba(168, 85, 247, 0.15);
        }

        body {
            background-color: var(--background);
            color: var(--text-primary);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 14px;
            line-height: 1.5;
            /* height: 100vh; */
            /* overflow: hidden;  Allow scrolling on small screens via media query usually, but goal is "less scrolling" */
            overflow-y: auto;
            display: flex;
            flex-direction: column;

            /* Grainy background */
            background:
                repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.03) 0px, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 2px),
                repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.03) 0px, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 2px),
                radial-gradient(circle at 50% 30%, #252832 0%, #1a1c23 60%, #111216 100%);
        }

        /* Vignette */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.6) 100%);
            pointer-events: none;
            z-index: 1;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #3a3f4b;
            border-radius: 4px;
            border: 2px solid var(--background);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4a505f;
        }

        /* Layout Container */
        .app-container {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        /* Header Bar */
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: linear-gradient(to bottom, #2a2d38, #23262f);
            border: 1px solid #000;
            border-bottom: 2px solid #000;
            box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05);
            border-radius: 6px 6px 0 0;
            /* Or full rounded if floating */
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .header-title {
            font-size: 16px;
            font-weight: 600;
            color: #e0e2e5;
            letter-spacing: 1px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-title img {
            width: 24px;
            height: 24px;
        }

        .header-controls {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .version-tag {
            font-family: 'SF Mono', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Main Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 20px;
            padding-bottom: 1rem;
            /* flex: 1; */
            /* min-height: 0; */
            /* meaningful for flex children */
        }

        .hero {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            /* padding: 12px 20px; */
            background: linear-gradient(to bottom, #2a2d38, #23262f);
            border: 1px solid #000;
            border-bottom: 2px solid #000;
            box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05);
            border-radius: 6px 6px 0 0;
            border-radius: 6px;
            margin-bottom: 20px;
            overflow: hidden;
            aspect-ratio: 10 / 1;
            transition: opacity 0.2s ease-in-out;
            cursor: pointer;
        }

        .hero:hover::before {
            transition: opacity 0.2s ease-in-out;
            opacity: 1;
        }

        .hero:hover::after {
            transition: opacity 0.2s ease-in-out;
            opacity: 1;
        }

        .hero::before {
            content: "";
            display: inline-block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            text-align: center;
            align-content: center;
        }

        .hero::after {
            content: "▶︎ preview on youtube";
            position: absolute;
            top: 50%;
            left: 50%;
            translate: -50% -50%;
            /* width: 200px;
            height: 200px; */
            font-family: 'SF Mono', monospace;
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
        }

        .hero video {
            width: 100%;
            height: auto;
        }

        /* Mobile Responsive */
        @media (max-width: 900px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                overflow-y: visible;
                display: flex;
                flex-direction: column;
            }

            body {
                height: auto;
                overflow-y: auto;
            }

            .panel-blue .panel-header,
            .panel-purple .panel-header {
                flex-direction: row;
                justify-content: flex-start;
            }

            .visuals {
                min-height: 580px;
                max-height: unset !important
            }
        }

        /* Panels */
        .panel {
            background: #23262f;
            border: 1px solid #000;
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.05),
                var(--panel-shadow);
            border-radius: 6px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        /* Panel Accents (Border + Glow) */
        .panel::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 4px;
            border-radius: 6px 0 0 6px;
        }

        .panel-pink::after {
            background: var(--accent-pink);
            box-shadow: var(--glow-pink);
        }

        .panel-blue::after {
            background: var(--accent-blue);
            box-shadow: var(--glow-blue);
        }

        .panel-orange::after {
            background: var(--accent-orange);
            box-shadow: var(--glow-orange);
        }

        .panel-purple::after {
            background: var(--accent-purple);
            box-shadow: var(--glow-purple);
        }

        .panel:hover {
            /* transform: translateY(-2px); */
            z-index: 10;
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .panel-title {
            font-size: 17px;
            font-weight: 500;
            letter-spacing: 2px;
            text-transform: lowercase;
        }

        .panel-pink .panel-title {
            color: var(--accent-pink);
        }

        .panel-blue .panel-title {
            color: var(--accent-blue);
        }

        .panel-orange .panel-title {
            color: var(--accent-orange);
        }

        .panel-purple .panel-title {
            color: var(--accent-purple);
        }

        .panel-blue .panel-header,
        .panel-purple .panel-header {
            flex-direction: row-reverse;
            justify-content: flex-start;
        }

        /* Content Areas */
        .panel-content {
            flex: 1;
            /* overflow-y: auto; */
            height: calc(100% - 4rem);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Hero Content (Pink Panel) */
        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #fff;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .hero-tagline {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            font-weight: 300;
        }

        .hero-tag {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent-pink), #b91c1c);
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.8rem;
            color: white;
            margin-bottom: 10px;
            box-shadow: 0 2px 10px rgba(217, 70, 239, 0.4);
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            background: #23262f;
            border: 1px solid var(--accent-orange);
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.2s;
            cursor: pointer;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(to bottom, #d946ef, #a21caf);
            border-color: #f0abfc;
            color: white;
            width: 100%;
            font-size: 1.1rem;
            padding: 16px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(217, 70, 239, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--text-secondary);
            color: var(--text-secondary);
            font-size: 0.9rem;
            padding: 8px 16px;
        }

        .btn-secondary:hover {
            border-color: var(--text-primary);
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        /* Download Options (Orange Panel) */
        .download-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .download-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .download-info h4 {
            color: var(--text-primary);
            font-size: 13px;
        }

        .download-info p {
            color: var(--text-muted);
            font-size: 11px;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* Features (Purple Panel) */
        .feature-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .feature-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .feature-icon {
            color: var(--accent-purple);
            font-size: 1.5rem;
            min-width: 24px;
            text-align: center;
        }

        .feature-text h4 {
            font-size: 13px;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .feature-text p {
            font-size: 11px;
            color: var(--text-secondary);
            line-height: 1.3;
        }

        /* Screenshots (Blue Panel) */
        .screenshot-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow: hidden;
            cursor: pointer;
        }

        .main-screenshot {
            width: 100%;
            height: 100%;
            object-fit: contain;
            /* or cover */
            border-radius: 4px;
            border: 1px solid #121318;
            background: #000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s;
        }

        .main-screenshot:hover {
            transform: scale(1.02);
        }

        .screenshot-thumbs {
            display: flex;
            gap: 0;
            justify-content: center;
        }

        .thumb {
            width: 60px;
            height: 40px;
            border-radius: 2px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.2s;
            object-fit: cover;
        }

        .thumb:hover,
        .thumb.active {
            opacity: 1;
            border-color: var(--accent-blue);
        }

        .visuals {
            min-height: 580px;
            max-height: 580px
        }

        /* Lightbox Overlay */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .lightbox.active {
            display: flex;
            opacity: 1;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: default;
        }

        .lightbox-img {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            user-select: none;
            cursor: pointer;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 32px;
            transition: all 0.2s;
            z-index: 10001;
            user-select: none;
        }

        .lightbox-nav:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(1.1);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .lightbox-nav.prev {
            left: 40px;
        }

        .lightbox-nav.next {
            right: 40px;
        }

        .lightbox-close {
            position: absolute;
            top: 40px;
            right: 40px;
            color: var(--text-secondary);
            font-size: 40px;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 10002;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .lightbox-close:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }

        @media (max-width: 900px) {
            .lightbox-nav {
                width: 44px;
                height: 44px;
                font-size: 24px;
            }

            .lightbox-nav.prev {
                left: 15px;
            }

            .lightbox-nav.next {
                right: 15px;
            }

            .lightbox-close {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 30px;
            }
        }

        .topnav-link {
            transition: all 0.2s ease-in-out;
        }

        .topnav-link:not(:first-child) {
            margin-left: 3px;
        }

        .topnav-link:hover {
            font-family: 'SF Mono', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>

    <script>
        // Existing Scripts Preserved
        function detectOS() {
            const userAgent = window.navigator.userAgent;
            const platform = window.navigator.platform;
            const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];
            const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];

            let os = null;
            let architecture = null;

            if (macosPlatforms.indexOf(platform) !== -1) {
                os = 'macOS';
                if (navigator.userAgentData && navigator.userAgentData.platform) {
                    architecture = navigator.userAgentData.platform === 'macOS' ? 'arm64' : 'x64';
                } else {
                    architecture = navigator.maxTouchPoints > 1 ? 'arm64' : 'x64';
                }
            } else if (windowsPlatforms.indexOf(platform) !== -1) {
                os = 'Windows';
            }
            console.log('Detected OS:', os, 'Architecture:', architecture);
            return { os, architecture };
        }

        async function getLatestRelease() {
            try {
                const response = await fetch('https://api.github.com/repos/effree/EM-Spec/releases/latest');
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Failed to fetch release info:', error);
                return null;
            }
        }

        async function updateDownloadButtons() {
            const detection = detectOS();
            const release = await getLatestRelease();

            if (!release || !release.assets) return;

            // Update Version Tag
            const versionTags = document.querySelectorAll('.version-tag-text');
            versionTags.forEach(tag => tag.textContent = release.tag_name || 'v0.4.x');

            let downloadUrl = release.html_url;
            let icon = 'bx bx-arrow-down-stroke-circle';
            let buttonText = 'Download Now';

            // Logic to find specific assets
            const windowsAsset = release.assets.find(asset =>
                asset.name.toLowerCase().includes('win') ||
                asset.name.toLowerCase().includes('windows') ||
                asset.name.toLowerCase().includes('.exe')
            );

            const macIntelAsset = release.assets.find(asset =>
                (asset.name.toLowerCase().includes('mac') || asset.name.toLowerCase().includes('darwin') || asset.name.toLowerCase().includes('.dmg')) &&
                (asset.name.toLowerCase().includes('x64') || asset.name.toLowerCase().includes('intel') || asset.name.toLowerCase().includes('x86_64'))
            );

            const macArmAsset = release.assets.find(asset =>
                (asset.name.toLowerCase().includes('mac') || asset.name.toLowerCase().includes('darwin') || asset.name.toLowerCase().includes('.dmg')) &&
                (asset.name.toLowerCase().includes('arm64') || asset.name.toLowerCase().includes('apple') || asset.name.toLowerCase().includes('aarch64'))
            );

            const anyMacAsset = release.assets.find(asset =>
                asset.name.toLowerCase().includes('mac') ||
                asset.name.toLowerCase().includes('darwin') ||
                asset.name.toLowerCase().includes('.dmg')
            );

            // Auto-detect Main Button
            if (detection.os === 'Windows' && windowsAsset) {
                downloadUrl = windowsAsset.browser_download_url;
                icon = 'bxl bx-microsoft-windows';
                buttonText = 'Download for Windows';
            } else if (detection.os === 'macOS') {
                const targetAsset = detection.architecture === 'arm64' ? (macArmAsset || anyMacAsset) : (macIntelAsset || anyMacAsset);
                if (targetAsset) {
                    downloadUrl = targetAsset.browser_download_url;
                    icon = 'bxl bx-apple';
                    buttonText = 'Download for macOS';
                }
            }

            // Update Main Hero Button
            const mainBtn = document.getElementById('mainDownloadBtn');
            if (mainBtn) {
                mainBtn.href = downloadUrl;
                mainBtn.innerHTML = `<i class="${icon}"></i> ${buttonText}`;
            }

            // Update Specific Buttons in List
            if (windowsAsset) document.getElementById('winDownloadLink').href = windowsAsset.browser_download_url;
            if (macIntelAsset) document.getElementById('macIntelDownloadLink').href = macIntelAsset.browser_download_url;
            else if (anyMacAsset) document.getElementById('macIntelDownloadLink').href = anyMacAsset.browser_download_url;

            if (macArmAsset) document.getElementById('macArmDownloadLink').href = macArmAsset.browser_download_url;
            else if (anyMacAsset) document.getElementById('macArmDownloadLink').href = anyMacAsset.browser_download_url;
        }

        // Gallery & Lightbox Logic
        let currentImageIndex = 0;
        const screenshotUrls = [];

        function setupGallery() {
            const mainImg = document.getElementById('mainScreenshot');
            const thumbs = document.querySelectorAll('.thumb');
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightboxImg');

            // Collect all screenshot URLs
            thumbs.forEach((thumb, index) => {
                screenshotUrls.push(thumb.src);

                thumb.addEventListener('click', () => {
                    mainImg.src = thumb.src;
                    thumbs.forEach(t => t.classList.remove('active'));
                    thumb.classList.add('active');
                    currentImageIndex = index;
                });
            });

            // Open Lightbox
            mainImg.addEventListener('click', () => {
                openLightbox(currentImageIndex);
            });

            // Close Lightbox on overlay click or re-clicking image
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox || e.target === lightboxImg || e.target.closest('.lightbox-close')) {
                    closeLightbox();
                }
            });

            // Prevent image click from closing if we want different behavior, 
            // but user specifically asked for re-clicking image to exit.
        }

        function openLightbox(index) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightboxImg');
            currentImageIndex = index;
            lightboxImg.src = screenshotUrls[currentImageIndex];
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }

        function navigateLightbox(direction) {
            currentImageIndex += direction;
            if (currentImageIndex >= screenshotUrls.length) currentImageIndex = 0;
            if (currentImageIndex < 0) currentImageIndex = screenshotUrls.length - 1;

            const lightboxImg = document.getElementById('lightboxImg');
            lightboxImg.src = screenshotUrls[currentImageIndex];

            // Update thumb selection to match
            const thumbs = document.querySelectorAll('.thumb');
            const mainImg = document.getElementById('mainScreenshot');
            mainImg.src = screenshotUrls[currentImageIndex];
            thumbs.forEach(t => t.classList.remove('active'));
            thumbs[currentImageIndex].classList.add('active');
        }

        // Keyboard support
        window.addEventListener('keydown', (e) => {
            const lightbox = document.getElementById('lightbox');
            if (!lightbox.classList.contains('active')) return;

            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowLeft') navigateLightbox(-1);
            if (e.key === 'ArrowRight') navigateLightbox(1);
        });

        window.addEventListener('DOMContentLoaded', () => {
            updateDownloadButtons();
            setupGallery();
        });
    </script>
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header-bar">
            <div class="header-title">
                <img src="assets/icon.png" alt="Logo">
                <span>EM-Spec</span>
            </div>
            <div class="header-controls">
                <span class="version-tag" style="margin-right: 15px;">Version: <span
                        class="version-tag-text">...</span></span>
                <a href="https://github.com/effree/EM-Spec" target="_blank" class="btn-secondary topnav-link"
                    style="border:none; display:flex;padding:4px; text-decoration: none;"><i class='bxl bx-github'
                        style="font-size: 18px;"></i></a>
                <a href="https://youtube.com/effree-meyer" target="_blank" class="btn-secondary topnav-link"
                    style="border:none; display:flex;padding:4px; text-decoration: none;"><i class='bxl bx-youtube'
                        style="font-size: 18px;"></i></a>
            </div>
        </header>

        <div class="hero" id="hero" onclick="window.open('https://www.youtube.com/watch?v=bOogeUrEDWA', '_blank');">
            <video src="assets/full-width-example.mp4" autoplay loop muted id="heroVideo"></video>
        </div>

        <!-- Main Dashboard -->
        <div class="dashboard-grid">

            <!-- Panel 1: Analysis (Hero/About) -->
            <div class="panel panel-pink">
                <div class="panel-header">
                    <i class='bx bx-pulse' style="color:var(--accent-pink)"></i>
                    <span class="panel-title">Analysis</span>
                </div>
                <div class="panel-content" style="justify-content: center; text-align: left;">
                    <!-- <span class="hero-tag">100% Free</span> -->
                    <h1 class="hero-title">Audio Visualization<br>Reimagined.</h1>
                    <p class="hero-tagline">
                        Advanced real-time spectrogram with frequency reassignment for unparalleled low-end clarity.
                        The missing visual link in your production chain.
                    </p>
                    <div style="margin-top: auto;">
                        <a href="https://github.com/effree/EM-Spec/releases" id="mainDownloadBtn"
                            class="btn btn-primary">
                            <i class='bx bx-loader-alt bx-spin'></i> Loading...
                        </a>
                        <p style="margin-top: 10px; font-size: 11px; color: var(--text-muted); text-align: center;">
                            Requires Windows 10+ or macOS 10.13+
                        </p>
                    </div>
                </div>
            </div>

            <!-- Panel 2: Visuals (Screenshots) -->
            <div class="panel panel-blue visuals">
                <div class="panel-header">
                    <span class="panel-title">Visuals</span>
                    <i class='bx bx-images' style="color:var(--accent-blue)"></i>
                </div>
                <div class="panel-content">
                    <div class="screenshot-container">
                        <img src="assets/screenshots/ss-1.png" id="mainScreenshot" class="main-screenshot"
                            alt="Main Interface">
                    </div>
                    <div class="screenshot-thumbs">
                        <img src="assets/screenshots/ss-1.png" class="thumb active" alt="Spectrogram">
                        <img src="assets/screenshots/ss-9.png" class="thumb" alt="Notes">
                        <img src="assets/screenshots/ss-2.png" class="thumb" alt="Stereoscope">
                        <img src="assets/screenshots/ss-3.png" class="thumb" alt="Snapped Spectrogram and Stereoscope">
                        <img src="assets/screenshots/ss-4.png" class="thumb" alt="settings">
                        <img src="assets/screenshots/ss-5.png" class="thumb" alt="Colormaps">
                        <img src="assets/screenshots/ss-6.png" class="thumb" alt="Colormaps">
                        <img src="assets/screenshots/ss-8.png" class="thumb" alt="Colormaps">

                    </div>
                </div>
            </div>

            <!-- Panel 3: Dynamics (Downloads) -->
            <div class="panel panel-orange">
                <div class="panel-header">
                    <i class='bx bx-arrow-to-bottom-stroke' style="color:var(--accent-orange)"></i>
                    <span class="panel-title">Downloads</span>
                </div>
                <div class="panel-content">
                    <div class="download-list">
                        <!-- Windows -->
                        <div class="download-item">
                            <div class="download-info">
                                <h4>Windows (x64)</h4>
                                <p>Windows 10, 11</p>
                            </div>
                            <a href="#" id="winDownloadLink" class="btn btn-sm btn-secondary"
                                style="border-color: var(--accent-orange); color: var(--accent-orange);">
                                <i class='bxl bx-microsoft-windows'></i> .exe
                            </a>
                        </div>
                        <!-- Mac Intel -->
                        <div class="download-item">
                            <div class="download-info">
                                <h4>macOS (Intel)</h4>
                                <p>macOS 10.13+</p>
                            </div>
                            <a href="#" id="macIntelDownloadLink" class="btn btn-sm btn-secondary">
                                <i class='bxl bx-apple'></i> .dmg
                            </a>
                        </div>
                        <!-- Mac ARM -->
                        <div class="download-item">
                            <div class="download-info">
                                <h4>macOS (Silicon)</h4>
                                <p>M1, M2, M3</p>
                            </div>
                            <a href="#" id="macArmDownloadLink" class="btn btn-sm btn-secondary">
                                <i class='bxl bx-apple'></i> .dmg
                            </a>
                        </div>

                        <!-- Max for Live -->
                        <div class="download-item" style="margin-top: 5px; background: rgba(255,255,255,0.03);">
                            <div class="download-info">
                                <h4>Max for Live Device</h4>
                                <p>Requires Ableton Live 10+</p>
                            </div>
                            <a href="https://maxforlive.com/library/device/13898/em-spec"
                                class="btn btn-sm btn-secondary">
                                <img src="assets/ableton-live.svg"
                                    style="width: 14px; height: 14px; vertical-align: middle; filter: invert(0.8);">
                                .amxd
                            </a>
                        </div>

                        <div style="margin-top: 10px; text-align: center;">
                            <a href="changelog.html"
                                style="color: var(--text-secondary); font-size: 11px; text-decoration: none; border-bottom: 1px dashed var(--text-secondary);">View
                                Changelog</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel 4: Advanced (Features) -->
            <div class="panel panel-purple">
                <div class="panel-header">
                    <span class="panel-title">Features</span>
                    <i class='bx bx-slider-alt' style="color:var(--accent-purple)"></i>
                </div>
                <div class="panel-content feature-list" style="overflow-y: auto;">
                    <div class="feature-item">
                        <div class="feature-icon"><i class='bx bx-waveform'></i></div>
                        <div class="feature-text">
                            <h4>Frequency Reassignment</h4>
                            <p>Sharper transients and clearer low-end definition than standard FFT-based spectrograms.
                            </p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon"><i class='bx bxs-palette'></i></div>
                        <div class="feature-text">
                            <h4>35+ Colormaps</h4>
                            <p>Customize the look to match your DAW or mood (Viridis, Magma, Inferno, etc).</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon"><i class='bx bx-pin'></i></div>
                        <div class="feature-text">
                            <h4>Always On Top</h4>
                            <p>Keep the window visible while you work in Ableton, FL Studio, or Logic.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon"><i class='bx bx-music'></i></div>
                        <div class="feature-text">
                            <h4>Note Detection</h4>
                            <p>Hover over frequencies to see the corresponding musical note and pitch.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon"><i class='bx bx-speaker'></i></div>
                        <div class="feature-text">
                            <h4>Stereoscope</h4>
                            <p>View the stero-image of your audio in real-time with 4 visualization modes.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon"><i class='bx bx-dock-right'></i></div>
                        <div class="feature-text">
                            <h4>Window Docking</h4>
                            <p>Dock your windows together to create one large window or seperate them to better organize
                                your workspace.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- <script>
        window.addEventListener('resize', updateVideoSize);
        function updateVideoSize() {
            const video = document.getElementById('heroVideo');
            const hero = document.getElementById('hero');
            console.log(video.offsetHeight);
            if (video.offsetHeight < 115) {
                hero.style.height = 'calc(210px - ' + (video.offsetHeight - 48) + 'px)';
            }
        }

        // Initialize on page load
        window.addEventListener('load', updateVideoSize);
    </script> -->
    <!-- Lightbox Structure -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-close"><i class='bx bx-x'></i></div>
        <div class="lightbox-nav prev" onclick="event.stopPropagation(); navigateLightbox(-1)"><i
                class='bx bx-chevron-left'></i></div>
        <div class="lightbox-content">
            <img src="" id="lightboxImg" class="lightbox-img" alt="Fullscreen Screenshot">
        </div>
        <div class="lightbox-nav next" onclick="event.stopPropagation(); navigateLightbox(1)"><i
                class='bx bx-chevron-right'></i></div>
    </div>
</body>

</html>